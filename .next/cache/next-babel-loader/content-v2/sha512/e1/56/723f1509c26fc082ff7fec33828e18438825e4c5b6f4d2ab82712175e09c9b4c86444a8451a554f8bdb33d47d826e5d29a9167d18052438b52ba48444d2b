{"ast":null,"code":"const nodemailer = require(\"nodemailer\");\n\nexport default function handlebar(req, res) {\n  console.log(\"Request\", req.body[1]); // async..await is not allowed in global scope, must use a wrapper\n\n  async function main() {\n    // Generate test SMTP service account from ethereal.email\n    // Only needed if you don't have a real mail account for testing\n    let testAccount = await nodemailer.createTestAccount(); // create reusable transporter object using the default SMTP transport\n\n    let transporter = nodemailer.createTransport({\n      host: \"smtp.ethereal.email\",\n      port: 587,\n      secure: false,\n      // true for 465, false for other ports\n      auth: {\n        user: testAccount.user,\n        // generated ethereal user\n        pass: testAccount.pass // generated ethereal password\n\n      }\n    }); // send mail with defined transport object\n\n    let info = await transporter.sendMail({\n      from: `${req.body[1]}`,\n      // sender address\n      to: \"petephinney@gmail.com\",\n      // list of receivers\n      subject: `Message from dry-john.com - ${req.body.name}`,\n      // Subject line\n      text: `Hello from ${req.body[0]}, \\n \\n ${req.body[4]}\\n \\n Phone number${req.body[3]}`,\n      // plain text body\n      html: `<h1>Hello from ${req.body[0]}</h1>, \\n \\n <p>${req.body[4]}</p>\\n \\n Phone number ${req.body[3]}` // html body\n\n    });\n    console.log(\"Message sent: %s\", info.messageId); // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n    // Preview only available when sending through an Ethereal account\n\n    console.log(\"Preview URL: %s\", nodemailer.getTestMessageUrl(info)); // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n  }\n\n  main().catch(console.error);\n}","map":{"version":3,"sources":["/Volumes/Studio Hard Drive/Dev_loper/dryJohn/frontend/dryjohn/src/pages/api/contact.js"],"names":["nodemailer","require","handlebar","req","res","console","log","body","main","testAccount","createTestAccount","transporter","createTransport","host","port","secure","auth","user","pass","info","sendMail","from","to","subject","name","text","html","messageId","getTestMessageUrl","catch","error"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AACA,eAAe,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,GAAxB,EAA6B;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBH,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAvB,EAD0C,CAG1C;;AACA,iBAAeC,IAAf,GAAsB;AACpB;AACA;AACA,QAAIC,WAAW,GAAG,MAAMT,UAAU,CAACU,iBAAX,EAAxB,CAHoB,CAKpB;;AACA,QAAIC,WAAW,GAAGX,UAAU,CAACY,eAAX,CAA2B;AAC3CC,MAAAA,IAAI,EAAE,qBADqC;AAE3CC,MAAAA,IAAI,EAAE,GAFqC;AAG3CC,MAAAA,MAAM,EAAE,KAHmC;AAG5B;AACfC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAER,WAAW,CAACQ,IADd;AACoB;AACxBC,QAAAA,IAAI,EAAET,WAAW,CAACS,IAFd,CAEoB;;AAFpB;AAJqC,KAA3B,CAAlB,CANoB,CAgBpB;;AACA,QAAIC,IAAI,GAAG,MAAMR,WAAW,CAACS,QAAZ,CAAqB;AACpCC,MAAAA,IAAI,EAAG,GAAElB,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,EADe;AACZ;AACxBe,MAAAA,EAAE,EAAE,uBAFgC;AAEP;AAC7BC,MAAAA,OAAO,EAAG,+BAA8BpB,GAAG,CAACI,IAAJ,CAASiB,IAAK,EAHlB;AAGqB;AACzDC,MAAAA,IAAI,EAAG,cAAatB,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,WAAUJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,qBAAoBJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,EAJlD;AAIqD;AACzFmB,MAAAA,IAAI,EAAG,kBAAiBvB,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,mBAAkBJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,0BAAyBJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,EALnE,CAKsE;;AALtE,KAArB,CAAjB;AAQAF,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCa,IAAI,CAACQ,SAArC,EAzBoB,CA0BpB;AAEA;;AACAtB,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BN,UAAU,CAAC4B,iBAAX,CAA6BT,IAA7B,CAA/B,EA7BoB,CA8BpB;AACD;;AAEDX,EAAAA,IAAI,GAAGqB,KAAP,CAAaxB,OAAO,CAACyB,KAArB;AACD","sourcesContent":["const nodemailer = require(\"nodemailer\");\nexport default function handlebar(req, res) {\n  console.log(\"Request\", req.body[1]);\n\n  // async..await is not allowed in global scope, must use a wrapper\n  async function main() {\n    // Generate test SMTP service account from ethereal.email\n    // Only needed if you don't have a real mail account for testing\n    let testAccount = await nodemailer.createTestAccount();\n\n    // create reusable transporter object using the default SMTP transport\n    let transporter = nodemailer.createTransport({\n      host: \"smtp.ethereal.email\",\n      port: 587,\n      secure: false, // true for 465, false for other ports\n      auth: {\n        user: testAccount.user, // generated ethereal user\n        pass: testAccount.pass, // generated ethereal password\n      },\n    });\n\n    // send mail with defined transport object\n    let info = await transporter.sendMail({\n      from: `${req.body[1]}`, // sender address\n      to: \"petephinney@gmail.com\", // list of receivers\n      subject: `Message from dry-john.com - ${req.body.name}`, // Subject line\n      text: `Hello from ${req.body[0]}, \\n \\n ${req.body[4]}\\n \\n Phone number${req.body[3]}`, // plain text body\n      html: `<h1>Hello from ${req.body[0]}</h1>, \\n \\n <p>${req.body[4]}</p>\\n \\n Phone number ${req.body[3]}`, // html body\n    });\n\n    console.log(\"Message sent: %s\", info.messageId);\n    // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n\n    // Preview only available when sending through an Ethereal account\n    console.log(\"Preview URL: %s\", nodemailer.getTestMessageUrl(info));\n    // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n  }\n\n  main().catch(console.error);\n}\n"]},"metadata":{},"sourceType":"module"}