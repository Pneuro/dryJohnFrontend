{"ast":null,"code":"const nodemailer = require(\"nodemailer\");\n\nexport default function handlebar(req, res) {\n  console.log(\"Request\", req.body); // async..await is not allowed in global scope, must use a wrapper\n\n  async function main() {\n    // Generate test SMTP service account from ethereal.email\n    // Only needed if you don't have a real mail account for testing\n    let testAccount = await nodemailer.createTestAccount(); // create reusable transporter object using the default SMTP transport\n\n    let transporter = nodemailer.createTransport({\n      host: \"smtp.ethereal.email\",\n      port: 587,\n      secure: false,\n      // true for 465, false for other ports\n      auth: {\n        user: testAccount.user,\n        // generated ethereal user\n        pass: testAccount.pass // generated ethereal password\n\n      }\n    }); // send mail with defined transport object\n\n    let info = await transporter.sendMail({\n      from: `${req.body.email}`,\n      // sender address\n      to: \"petephinney@gmail.com\",\n      // list of receivers\n      subject: `Message from dry-john.com - ${req.body.name}`,\n      // Subject line\n      text: `Hello from ${req.body.name}, \\n \\n ${req.body.bod}`,\n      // plain text body\n      html: \"<b>Hello world?</b>\" // html body\n\n    });\n    console.log(\"Message sent: %s\", info.messageId); // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n    // Preview only available when sending through an Ethereal account\n\n    console.log(\"Preview URL: %s\", nodemailer.getTestMessageUrl(info)); // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n  }\n\n  main().catch(console.error);\n}","map":{"version":3,"sources":["/Volumes/Studio Hard Drive/Dev_loper/dryJohn/frontend/dryjohn/src/pages/api/contact.js"],"names":["nodemailer","require","handlebar","req","res","console","log","body","main","testAccount","createTestAccount","transporter","createTransport","host","port","secure","auth","user","pass","info","sendMail","from","email","to","subject","name","text","bod","html","messageId","getTestMessageUrl","catch","error"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AACA,eAAe,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,GAAxB,EAA6B;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBH,GAAG,CAACI,IAA3B,EAD0C,CAG1C;;AACA,iBAAeC,IAAf,GAAsB;AACpB;AACA;AACA,QAAIC,WAAW,GAAG,MAAMT,UAAU,CAACU,iBAAX,EAAxB,CAHoB,CAKpB;;AACA,QAAIC,WAAW,GAAGX,UAAU,CAACY,eAAX,CAA2B;AAC3CC,MAAAA,IAAI,EAAE,qBADqC;AAE3CC,MAAAA,IAAI,EAAE,GAFqC;AAG3CC,MAAAA,MAAM,EAAE,KAHmC;AAG5B;AACfC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAER,WAAW,CAACQ,IADd;AACoB;AACxBC,QAAAA,IAAI,EAAET,WAAW,CAACS,IAFd,CAEoB;;AAFpB;AAJqC,KAA3B,CAAlB,CANoB,CAgBpB;;AACA,QAAIC,IAAI,GAAG,MAAMR,WAAW,CAACS,QAAZ,CAAqB;AACpCC,MAAAA,IAAI,EAAG,GAAElB,GAAG,CAACI,IAAJ,CAASe,KAAM,EADY;AACT;AAC3BC,MAAAA,EAAE,EAAE,uBAFgC;AAEP;AAC7BC,MAAAA,OAAO,EAAG,+BAA8BrB,GAAG,CAACI,IAAJ,CAASkB,IAAK,EAHlB;AAGqB;AACzDC,MAAAA,IAAI,EAAG,cAAavB,GAAG,CAACI,IAAJ,CAASkB,IAAK,WAAUtB,GAAG,CAACI,IAAJ,CAASoB,GAAI,EAJrB;AAIwB;AAC5DC,MAAAA,IAAI,EAAE,qBAL8B,CAKP;;AALO,KAArB,CAAjB;AAQAvB,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCa,IAAI,CAACU,SAArC,EAzBoB,CA0BpB;AAEA;;AACAxB,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BN,UAAU,CAAC8B,iBAAX,CAA6BX,IAA7B,CAA/B,EA7BoB,CA8BpB;AACD;;AAEDX,EAAAA,IAAI,GAAGuB,KAAP,CAAa1B,OAAO,CAAC2B,KAArB;AACD","sourcesContent":["const nodemailer = require(\"nodemailer\");\nexport default function handlebar(req, res) {\n  console.log(\"Request\", req.body);\n\n  // async..await is not allowed in global scope, must use a wrapper\n  async function main() {\n    // Generate test SMTP service account from ethereal.email\n    // Only needed if you don't have a real mail account for testing\n    let testAccount = await nodemailer.createTestAccount();\n\n    // create reusable transporter object using the default SMTP transport\n    let transporter = nodemailer.createTransport({\n      host: \"smtp.ethereal.email\",\n      port: 587,\n      secure: false, // true for 465, false for other ports\n      auth: {\n        user: testAccount.user, // generated ethereal user\n        pass: testAccount.pass, // generated ethereal password\n      },\n    });\n\n    // send mail with defined transport object\n    let info = await transporter.sendMail({\n      from: `${req.body.email}`, // sender address\n      to: \"petephinney@gmail.com\", // list of receivers\n      subject: `Message from dry-john.com - ${req.body.name}`, // Subject line\n      text: `Hello from ${req.body.name}, \\n \\n ${req.body.bod}`, // plain text body\n      html: \"<b>Hello world?</b>\", // html body\n    });\n\n    console.log(\"Message sent: %s\", info.messageId);\n    // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n\n    // Preview only available when sending through an Ethereal account\n    console.log(\"Preview URL: %s\", nodemailer.getTestMessageUrl(info));\n    // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n  }\n\n  main().catch(console.error);\n}\n"]},"metadata":{},"sourceType":"module"}