{"ast":null,"code":"const nodemailer = require(\"nodemailer\");\n\nexport default function handlebar(req, res) {\n  console.log(\"Request\", req.body[1]); // async..await is not allowed in global scope, must use a wrapper\n\n  async function main() {\n    // Generate test SMTP service account from ethereal.email\n    // Only needed if you don't have a real mail account for testing\n    let testAccount = await nodemailer.createTestAccount(); // create reusable transporter object using the default SMTP transport\n\n    let transporter = nodemailer.createTransport({\n      host: \"smtp.gmail.email\",\n      port: 465,\n      secure: true,\n      auth: {\n        user: process.env.MAIL_USER,\n        // generated ethereal user\n        pass: process.env.MAIL_PASS // generated ethereal password\n\n      }\n    }); // send mail with defined transport object\n\n    let info = await transporter.sendMail({\n      from: `${req.body[1]}`,\n      // sender address\n      to: \"thedylankendrick@gmail.com\",\n      // list of receivers\n      subject: `Message from dry-john.com - ${req.body[0]}`,\n      // Subject line\n      text: `Hello from ${req.body[0]}, \\n \\n ${req.body[3]}\\n \\n Phone number ${req.body[2]}\\n\\n Email: ${req.body[1]}`,\n      // plain text body\n      html: `<h1>Hello from ${req.body[0]}</h1> \\n \\n <p>${req.body[3]}</p>\\n \\n <p>\n      Phone number ${req.body[2]}\\\n      </p>\n      <p>\n      \\n Email: ${req.body[1]}\n      </p>\n      ` // html body\n\n    });\n    console.log(\"Message sent: %s\", info.messageId); // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n    // Preview only available when sending through an Ethereal account\n\n    console.log(\"Preview URL: %s\", nodemailer.getTestMessageUrl(info)); // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n  }\n\n  main().catch(console.error);\n}","map":{"version":3,"sources":["/Volumes/Studio Hard Drive/Dev_loper/dryJohn/frontend/dryjohn/src/pages/api/contact.js"],"names":["nodemailer","require","handlebar","req","res","console","log","body","main","testAccount","createTestAccount","transporter","createTransport","host","port","secure","auth","user","process","env","MAIL_USER","pass","MAIL_PASS","info","sendMail","from","to","subject","text","html","messageId","getTestMessageUrl","catch","error"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AACA,eAAe,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,GAAxB,EAA6B;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBH,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAvB,EAD0C,CAG1C;;AACA,iBAAeC,IAAf,GAAsB;AACpB;AACA;AACA,QAAIC,WAAW,GAAG,MAAMT,UAAU,CAACU,iBAAX,EAAxB,CAHoB,CAKpB;;AACA,QAAIC,WAAW,GAAGX,UAAU,CAACY,eAAX,CAA2B;AAC3CC,MAAAA,IAAI,EAAE,kBADqC;AAE3CC,MAAAA,IAAI,EAAE,GAFqC;AAG3CC,MAAAA,MAAM,EAAE,IAHmC;AAI3CC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,SADd;AACyB;AAC7BC,QAAAA,IAAI,EAAEH,OAAO,CAACC,GAAR,CAAYG,SAFd,CAEyB;;AAFzB;AAJqC,KAA3B,CAAlB,CANoB,CAgBpB;;AACA,QAAIC,IAAI,GAAG,MAAMZ,WAAW,CAACa,QAAZ,CAAqB;AACpCC,MAAAA,IAAI,EAAG,GAAEtB,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,EADe;AACZ;AACxBmB,MAAAA,EAAE,EAAE,4BAFgC;AAEF;AAClCC,MAAAA,OAAO,EAAG,+BAA8BxB,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,EAHhB;AAGmB;AACvDqB,MAAAA,IAAI,EAAG,cAAazB,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,WAAUJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,sBAAqBJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,eAAcJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,EAJ7E;AAIgF;AACpHsB,MAAAA,IAAI,EAAG,kBAAiB1B,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY,kBAAiBJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY;AACvE,qBAAqBJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY;AACjC;AACA;AACA,kBAAkBJ,GAAG,CAACI,IAAJ,CAAS,CAAT,CAAY;AAC9B;AACA,OAX0C,CAWjC;;AAXiC,KAArB,CAAjB;AAcAF,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCiB,IAAI,CAACO,SAArC,EA/BoB,CAgCpB;AAEA;;AACAzB,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BN,UAAU,CAAC+B,iBAAX,CAA6BR,IAA7B,CAA/B,EAnCoB,CAoCpB;AACD;;AAEDf,EAAAA,IAAI,GAAGwB,KAAP,CAAa3B,OAAO,CAAC4B,KAArB;AACD","sourcesContent":["const nodemailer = require(\"nodemailer\");\nexport default function handlebar(req, res) {\n  console.log(\"Request\", req.body[1]);\n\n  // async..await is not allowed in global scope, must use a wrapper\n  async function main() {\n    // Generate test SMTP service account from ethereal.email\n    // Only needed if you don't have a real mail account for testing\n    let testAccount = await nodemailer.createTestAccount();\n\n    // create reusable transporter object using the default SMTP transport\n    let transporter = nodemailer.createTransport({\n      host: \"smtp.gmail.email\",\n      port: 465,\n      secure: true,\n      auth: {\n        user: process.env.MAIL_USER, // generated ethereal user\n        pass: process.env.MAIL_PASS, // generated ethereal password\n      },\n    });\n\n    // send mail with defined transport object\n    let info = await transporter.sendMail({\n      from: `${req.body[1]}`, // sender address\n      to: \"thedylankendrick@gmail.com\", // list of receivers\n      subject: `Message from dry-john.com - ${req.body[0]}`, // Subject line\n      text: `Hello from ${req.body[0]}, \\n \\n ${req.body[3]}\\n \\n Phone number ${req.body[2]}\\n\\n Email: ${req.body[1]}`, // plain text body\n      html: `<h1>Hello from ${req.body[0]}</h1> \\n \\n <p>${req.body[3]}</p>\\n \\n <p>\n      Phone number ${req.body[2]}\\\n      </p>\n      <p>\n      \\n Email: ${req.body[1]}\n      </p>\n      `, // html body\n    });\n\n    console.log(\"Message sent: %s\", info.messageId);\n    // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n\n    // Preview only available when sending through an Ethereal account\n    console.log(\"Preview URL: %s\", nodemailer.getTestMessageUrl(info));\n    // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n  }\n\n  main().catch(console.error);\n}\n"]},"metadata":{},"sourceType":"module"}